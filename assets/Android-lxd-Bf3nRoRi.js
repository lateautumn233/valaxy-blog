import{_ as k}from"./ValaxyMain.vue_vue_type_style_index_0_lang-C6iFaOKN.js";import{a as p,p as r,o as c,c as u,w as e,f as g,q as F,r as a,g as s,h as i}from"./app-DJXMUuPO.js";import"./YunFooter.vue_vue_type_script_setup_true_lang-Cm-I7XME.js";import"./YunCard.vue_vue_type_script_setup_true_lang-CC1xuBOh.js";import"./YunPageHeader.vue_vue_type_script_setup_true_lang-D34gyHKd.js";import"./index-C7yU5XnD.js";const y=s("p",null,[s("img",{src:"https://999-1257394446.cos.ap-hongkong.myqcloud.com/img/lxd.png",alt:"lxd.png"}),i(" 简介: LXD 是 Linux 容器 (LXC) 的开源容器管理扩展。LXD 既改进了现有的 LXC 功能，又提供了新的特性和功能来构建和管理 Linux 容器。")],-1),m=s("h2",{id:"_1-安装lxd模块",tabindex:"-1"},[i("1. 安装lxd模块 "),s("a",{class:"header-anchor",href:"#_1-安装lxd模块","aria-label":'Permalink to "1. 安装lxd模块"'},"​")],-1),E=s("p",null,[i("下载此"),s("a",{href:"https://alist.qiuqiu233.xyz/d/%E8%BD%AF%E4%BB%B6/lxd/lxd-android.zip",target:"_blank",rel:"noreferrer"},"magisk模块"),i("安装并重启")],-1),b=s("h3",{id:"_1-1-创建容器",tabindex:"-1"},[i("1.1. 创建容器 "),s("a",{class:"header-anchor",href:"#_1-1-创建容器","aria-label":'Permalink to "1.1. 创建容器"'},"​")],-1),f=s("p",null,"随便找一个终端软件执行",-1),_=s("div",{class:"language-shell vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"shell"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"su")])])]),s("button",{class:"collapse"})],-1),C=s("p",null,"然后初始化",-1),v=s("div",{class:"language-shell vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"shell"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"$"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," lxd init")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Would"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," you like to use LXD clustering? "),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"yes/no"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") [default=no]:")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Do"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," you want to configure a new storage pool? "),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"yes/no"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") [default=yes]:")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Name"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," of the new storage pool [default=default]:")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Name"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," of the storage backend to use "),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"btrfs,"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," dir, lvm"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") [default=btrfs]:")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Would"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," you like to create a new btrfs subvolume under /var/lib/lxd? "),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"yes/no"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") [default=yes]:")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Would"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," you like to connect to a MAAS server? "),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"yes/no"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") [default=no]:")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Would"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," you like to create a new local network bridge? "),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"yes/no"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") [default=yes]:")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"What"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," should the new bridge be called? [default=lxdbr0]:")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"What"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," IPv4 address should be used? "),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"CIDR"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," subnet notation, “auto” or “none”"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") [default=auto]:")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"What"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," IPv6 address should be used? "),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"CIDR"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," subnet notation, “auto” or “none”"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") [default=auto]:")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Would"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," you like the LXD server to be available over the network? "),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"yes/no"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") [default=no]:")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Would"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," you like stale cached images to be updated automatically? "),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"yes/no"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") [default=yes]")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"Would"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' you like a YAML "lxd init"'),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," preseed to be printed? "),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"yes/no"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") [default=no]:")])])]),s("button",{class:"collapse"})],-1),x=s("p",null,"创建容器",-1),B=s("div",{class:"language-shell vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"shell"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"lxc"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," launch ubuntu:23.04 ubuntu")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# lxc launch 发行版:版本 容器名字")])])]),s("button",{class:"collapse"})],-1),w=s("p",null,"调整lxc容器密码",-1),L=s("div",{class:"language-shell vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"shell"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"lxc"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," exec ubuntu -- passwd")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"lxc"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," exec 容器名字 -- passwd")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 二进制文件位置可能不同")])])]),s("button",{class:"collapse"})],-1),$=s("h3",{id:"_1-2-配置网络",tabindex:"-1"},[i("1.2. 配置网络 "),s("a",{class:"header-anchor",href:"#_1-2-配置网络","aria-label":'Permalink to "1.2. 配置网络"'},"​")],-1),A=s("p",null,[i("(无需配置，自动处理) 如果容器无法访问网络，请发送/data/lxd/var/log/network.log到 "),s("a",{href:"mailto:lateautumn233@foxmail.com"},"lateautumn233@foxmail.com")],-1),q=s("h3",{id:"_2-1-web界面",tabindex:"-1"},[i("2.1. web界面 "),s("a",{class:"header-anchor",href:"#_2-1-web界面","aria-label":'Permalink to "2.1. web界面"'},"​")],-1),D=s("div",{class:"language-shell vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"shell"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"lxc"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' config set core.https_address "[::]:8443"')])])]),s("button",{class:"collapse"})],-1),P=s("p",null,"继续访问ip:8443按要求操作即可",-1),T=s("h3",{id:"_2-2-端口映射",tabindex:"-1"},[i("2.2. 端口映射 "),s("a",{class:"header-anchor",href:"#_2-2-端口映射","aria-label":'Permalink to "2.2. 端口映射"'},"​")],-1),W=s("div",{class:"language-shell vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"shell"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"lxc"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," config device add qiuqiu ssh proxy listen=tcp::外部ip connect=tcp::容器ip")])])]),s("button",{class:"collapse"})],-1),I=s("h3",{id:"_2-2-lxd运行docker",tabindex:"-1"},[i("2.2. lxd运行docker "),s("a",{class:"header-anchor",href:"#_2-2-lxd运行docker","aria-label":'Permalink to "2.2. lxd运行docker"'},"​")],-1),X=s("div",{class:"language-shell vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"shell"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"update-alternatives"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," --set"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," iptables /usr/sbin/iptables-legacy")])])]),s("button",{class:"collapse"})],-1),S=s("p",null,[s("span",{style:{color:"red"}},"注:未经允许禁止转载")],-1),N=s("p",null,"喵喵喵喵喵",-1),j=s("h2",{id:"参考文章",tabindex:"-1"},[i("参考文章: "),s("a",{class:"header-anchor",href:"#参考文章","aria-label":'Permalink to "参考文章:"'},"​")],-1),M=s("ul",null,[s("li",null,[s("a",{href:"https://new.negoces.top/posts/cecd6168/",target:"_blank",rel:"noreferrer"},"ArchLinux 安装 LXD")]),s("li",null,[s("a",{href:"https://mirrors.tuna.tsinghua.edu.cn/help/lxc-images/",target:"_blank",rel:"noreferrer"},"LXC Images 软件仓库镜像使用帮助")]),s("li",null,[s("a",{href:"https://github.com/lxc/lxc/issues/4072",target:"_blank",rel:"noreferrer"},"Failed to mount cgroup at /sys/fs/cgroup/systemd: Operation not permitted")])],-1),G={__name:"Android-lxd",setup(z,{expose:o}){const t=JSON.parse('{"title":"Android运行lxd","description":null,"frontmatter":{"title":"Android运行lxd","subtitle":null,"date":"2024-02-07T02:13:25.000Z","draft":false,"author":"qiuqiu","authorLink":"blog.qiuqiu233.xyz","description":null,"license":null,"images":null,"resources":[{"name":"featured-image","src":"featured-image.png"}],"tags":["lxd","lxc"],"categories":null,"featuredImage":null,"featuredImagePreview":"","hiddenFromHomePage":false,"hiddenFromSearch":false,"twemoji":false,"lightgallery":true,"ruby":true,"fraction":true,"fontawesome":true,"linkToMarkdown":true,"rssFullText":false,"toc":{"enable":true,"auto":true},"code":{"copy":true,"maxShownLines":50},"math":{"enable":false},"mapbox":null,"share":{"enable":true},"comment":{"enable":true},"library":{"css":null,"js":null},"seo":{"images":[]},"modified":"2024-02-17T17:44:27.000Z"},"headers":[{"level":2,"title":"1. 安装lxd模块","slug":"_1-安装lxd模块","link":"#_1-安装lxd模块","children":[{"level":3,"title":"1.1. 创建容器","slug":"_1-1-创建容器","link":"#_1-1-创建容器","children":[]},{"level":3,"title":"1.2. 配置网络","slug":"_1-2-配置网络","link":"#_1-2-配置网络","children":[]},{"level":3,"title":"2.1. web界面","slug":"_2-1-web界面","link":"#_2-1-web界面","children":[]},{"level":3,"title":"2.2. 端口映射","slug":"_2-2-端口映射","link":"#_2-2-端口映射","children":[]},{"level":3,"title":"2.2. lxd运行docker","slug":"_2-2-lxd运行docker","link":"#_2-2-lxd运行docker","children":[]}]},{"level":2,"title":"参考文章:","slug":"参考文章","link":"#参考文章","children":[]}],"relativePath":"pages/posts/Android-lxd.md","path":"/home/runner/work/valaxy-blog/valaxy-blog/pages/posts/Android-lxd.md","lastUpdated":1708336498000}'),h=p(),n=t.frontmatter||{};return h.meta.frontmatter=Object.assign(h.meta.frontmatter||{},t.frontmatter||{}),r("pageData",t),r("valaxy:frontmatter",n),globalThis.$frontmatter=n,o({frontmatter:{title:"Android运行lxd",subtitle:null,date:"2024-02-07T02:13:25.000Z",draft:!1,author:"qiuqiu",authorLink:"blog.qiuqiu233.xyz",description:null,license:null,images:null,resources:[{name:"featured-image",src:"featured-image.png"}],tags:["lxd","lxc"],categories:null,featuredImage:null,featuredImagePreview:"",hiddenFromHomePage:!1,hiddenFromSearch:!1,twemoji:!1,lightgallery:!0,ruby:!0,fraction:!0,fontawesome:!0,linkToMarkdown:!0,rssFullText:!1,toc:{enable:!0,auto:!0},code:{copy:!0,maxShownLines:50},math:{enable:!1},mapbox:null,share:{enable:!0},comment:{enable:!0},library:{css:null,js:null},seo:{images:[]},modified:"2024-02-17T17:44:27.000Z"}}),(l,Z)=>{const d=k;return c(),u(d,{frontmatter:g(n)},{"main-content-md":e(()=>[y,F(" more "),m,E,b,f,_,C,v,x,B,w,L,$,A,q,D,P,T,W,I,X,S,N,j,M]),"main-header":e(()=>[a(l.$slots,"main-header")]),"main-header-after":e(()=>[a(l.$slots,"main-header-after")]),"main-nav":e(()=>[a(l.$slots,"main-nav")]),"main-content":e(()=>[a(l.$slots,"main-content")]),"main-content-after":e(()=>[a(l.$slots,"main-content-after")]),"main-nav-before":e(()=>[a(l.$slots,"main-nav-before")]),"main-nav-after":e(()=>[a(l.$slots,"main-nav-after")]),comment:e(()=>[a(l.$slots,"comment")]),footer:e(()=>[a(l.$slots,"footer")]),aside:e(()=>[a(l.$slots,"aside")]),"aside-custom":e(()=>[a(l.$slots,"aside-custom")]),default:e(()=>[a(l.$slots,"default")]),_:3},8,["frontmatter"])}}};export{G as default};
